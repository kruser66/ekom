# Web-приложение для определения заполненных форм (тестовое задание)

В базе данных хранится список шаблонов форм.
Шаблон формы, это структура, которая задается уникальным набором полей, с указанием их типов.

На вход по `/get_form` POST запросом передаются данные такого вида:
`f_name1=value1&f_name2=value2`.

Пример шаблона формы:

```json
{
    "name": "Form template name",
    "field_name_1": "email",
    "field_name_2": "phone"
}
```

Всего должно поддерживаться четыре типа данных полей:

- email
- телефон
- дата
- текст

В ответ нужно вернуть имя шаблона формы, если она была найдена.
Чтобы найти подходящий шаблон нужно выбрать тот, поля которого совпали с полями в присланной форме. Совпадающими считаются поля, у которых совпали имя и тип значения. Полей в пришедшей форме может быть больше чем в шаблоне, в этом случае шаблон все равно будет считаться подходящим. Самое главное, чтобы все поля шаблона присутствовали в форме.

Если подходящей формы не нашлось, вернуть ответ в следующем формате

```json
{
    "f_name1": "FIELD_TYPE",
    "f_name2": "FIELD_TYPE"
}
```

В проекте используется БД - `tinyDB`. Тестовые данные в файле `db.json`

## Как установить

Python 3 должен быть установлен.

- Скачать проект (git clone)

- Создать виртуальное окружение.

```bash
python -m venv venv
```

- Установить зависимости.

```bash
pip install -r requirements.txt
```

## Запуск проекта

```bash
python main.py
```

### Доступные endpoints

POST /get_form

## Запуск проекта в контейнере

```bash
docker compose up
```

Сервис использует фреймворк Flask и будет доступен по адресу по-умолчанию:
`127.0.0.1:5000`

### Примеры "правильных" запросов, которые возварщают форму из БД:

```bash
curl POST -d "title=data&waiting_till=2023-11-11&expired_at=12.11.2023" http://127.0.0.1:5000/get_form
```

```bash
curl POST -F registered_at=01.01.1990 -F username=Сергей -F phonenumber=+79122874873 -F email=info@example.com http://127.0.0.1:5000/get_form
```

Аналогично можно протестировать чере `Postman`.

Все остальные запросы, для которых не будет подходящих форм, будут возвращать  
струкруру полей и тип данных для этого поля в формате:
Для примера:

```bash
curl POST -d "title=info@example.com&waiting_till=2023-11-11&expired_at=12-11-2023" http://127.0.0.1:5000/get_form
```

```json
{
    "title": "email",
    "waiting_till": "date",
    "expired_at": "text",
}
```

## Цель проекта

Выполнение тестового задания на вакансию Junior+ Python разработчик
